<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Video.js v8 player with hls.js engine and P2P demo</title>
        <script src="https://cdn.jsdelivr.net/npm/p2p-media-loader-core@latest/build/p2p-media-loader-core.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/p2p-media-loader-hlsjs@latest/build/p2p-media-loader-hlsjs.min.js"></script>

        <link href="https://vjs.zencdn.net/8.9.0/video-js.css" rel="stylesheet" />
        <script src="https://vjs.zencdn.net/8.9.0/video.min.js"></script>

        <script src="../dist/videojs-contrib-hlsjs.min.js"></script>

        <style>
            #video {
                width: 730px;
                height: 410px;
                margin-left: auto;
                margin-right: auto;
                display: block;
            }
        </style>
    </head>
    <body>
        <video id="video" class="video-js vjs-default-skin" preload="none" autoplay controls></video>

        <script>
            if (p2pml.hlsjs.Engine.isSupported()) {
                var engine = new p2pml.hlsjs.Engine();

                var player = videojs("video", {
                    html5: {
                        hlsjsConfig: {
                            liveSyncDurationCount: 7, // To have at least 7 segments in queue
                            loader: engine.createLoaderClass(),
                        },
                    },
                });

                p2pml.hlsjs.initVideoJsContribHlsJsPlayer(player);

                player.src({
                    src: "https://fly.live.ceeblue.tv/cmaf/out+de1e6f7c-e5db-450b-9603-c3644274779b/index.m3u8",
                    type: "application/x-mpegURL",
                });

                player.ready(function () {
                    player.volume(0.01); // 1%
                });
            } else {
                document.write("Not supported :(");
            }
        </script>
    </body>
</html>
